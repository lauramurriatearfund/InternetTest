@using MvcMovie.Resources;
@{
    ViewBag.Title = Resources.ValidateTitle;
}


<script>
    var x = document.getElementById("demo");
    function getLocation() {
        alert('hi');
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
        alert(innerHTML);
    }
    function showPosition(position) {
        x.innerHTML = "Latitude: " + position.coords.latitude +
        "<br>Longitude: " + position.coords.longitude;
    }


    var infowindow = new google.maps.InfoWindow({
        map: map,
        position: pos,
        content: 'Location found using HTML5.'
    });
    alert("hello");
    // the below line has been inserted to assign a JS variable to HTML input field called 'geolocation'
    document.getElementById('location').value = pos
    map.setCenter(pos);
    // the below line has been inserted to autosubmit the form.
    document.getElementById("geolocation").submit();
</script>
<br />
<br />
<br />
<div class="row">
    <div class="col-md-12">
        <a href="@Url.Action("Submit", "HelloWorld")">
            <image src="/Content/images/back_button.png" width="70" height="70" valign="top" alt="Back"></image>
        </a>
        <span class="pull-right">
            <a href="@Url.Action("Upload", "HelloWorld")">
                <image src="/Content/images/forward_button.png" width="70" height="70" valign="top" alt="Continue"></image>
            </a>
        </span>
    </div>
</div>
<p>
    Welcome to the internet test application, location page.
    We would like to record your location for testing purposes. Please 'OK' the pop up to allow us to do this.
</p>
<p id="demo">Click the button please!</p>
<button onclick="getlocation()">LOCATE ME</button>
<div id="mapholder">
</div>
<form id="geolocation" action="upload" method="POST">

    <input type="text" id="location" name="location" value="" />
    <input type="submit" />

</form>


<!-- BEGIN SPEED TEST - DO NOT ALTER BELOW-->
<script type="text/javascript" src="speedtest/swfobject.js?v=2.2"></script>
<div id="mini-demo">
    Speedtest.net Mini requires at least version 8 of Flash. Please <a href="http://get.adobe.com/flashplayer/">update your client</a>.
</div><!--/mini-demo-->
<script type="text/javascript">
    var flashvars = {
        upload_extension: "aspx"
    };
    var params = {
        wmode: "transparent",
        quality: "high",
        menu: "false",
        allowScriptAccess: "always"
    };
    var attributes = {};
    swfobject.embedSWF("speedtest.swf?v=2.1.8", "mini-demo", "350", "200", "9.0.0", "speedtest/expressInstall.swf", flashvars, params, attributes);
</script>
<!-- END SPEED TEST - DO NOT ALTER ABOVE -->

<div class="row">
    <div class="col-md-12">
        <a href="@Url.Action("Submit", "HelloWorld")">
            <image src="/Content/images/back_button.png" width="70" height="70" valign="top" alt="@Resources.Back"></image>
        </a>
        <span class="pull-right">
            <a href="@Url.Action("Upload", "HelloWorld")">
                <image src="/Content/images/forward_button.png" width="70" height="70" valign="top" alt="@Resources.Continue"></image>
            </a>
        </span>
    </div>
</div>
